
@{
    ViewBag.Title = "Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<link href="~/Content/bootstrap-select.min.css" rel="stylesheet" />
<link href="~/Content/bootstrap-select.css" rel="stylesheet" />*@
<style>
     .lightBlue{
           border-color: #36c6d3;
        color: #3f444a;
        background: 0 0;
    }
    .lightBlue:hover{
        border-color: #36c6d3;
        color: #fff;
        background-color: #36c6d3;
    }
    .lightBlue2{
        cursor:text;
           border-color: #36c6d3;
        color: #3f444a;
        background: 0 0;
    }
     .dropbtn2 {
    background-color: #36c6d3;
    color: white;
    padding: 7px 5px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    text-decoration:none;
}

/* Dropdown button on hover & focus */
.dropbtn2:hover, .dropbtn2:focus {
    text-decoration:none;
    color:white;
    background-color: #199da9;
}
</style>






<div class="page-content" style="min-height: 1112px;background-color:white;">
    <div style="background-color:white;">
        <div class="portlet-title">
            <div class="caption font-red-sunglo">
                <i class="icon-settings font-red-sunglo"></i>
                <span class="caption-subject bold uppercase" style="font-size: large;"> المستخدمون</span>
            </div>
            <div class="page-bar" style="margin-top:30px;">
                <ul class="page-breadcrumb">
                    <li>
                        <a href="~/Category/Index">الرئيسية</a>
                        <i class="fa fa-angle-left"></i>
                    </li>
                    <li>
                        <span>المستخدمون</span>


                    </li>

                </ul>

            </div>
        </div>
            <div style="margin-right:20px;text-align:center;">

                @model PagedList.IPagedList<NawafizApp.Services.Dtos.UserDto>
                @using PagedList.Mvc;
                <link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />




                @using (Html.BeginForm("Users", "Users"))
            {
                    <p>

                    <p style="color:black;display:inline">نص البحث</p>
                    @Html.TextBox("SearchString", null, new { @style = "display:inline", @class = "btn btn-outline btn-circle lightBlue2 btn-sm fa fa-search" })

                    <input type="submit" style="padding:9px 7px;margin-right:5px;" value="بحث" class="btn btn-outline btn-circle lightBlue btn-sm fa fa-search" />
                    </p>
                }



                @*@Html.ActionLink("إضافة إعلان", "AddClassify", "Home", new { @guid = "f933abf6-bc52-40ea-a593-073be1419a02" }, new { @class = "dropbtn", @style = "text-decoration:none;margin-right:20px;" })*@
                <div class="col-md-12" style="padding-left:3%;">
                    <!-- BEGIN SAMPLE TABLE PORTLET-->
                    <div class="portlet">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="fa fa-bell-o"></i>جدول المستخدمين
                            </div>

                            @*<div class="tools">
                            <a href="javascript:;" class="collapse" data-original-title="" title=""> </a>
                            <a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title=""> </a>
                            <a href="javascript:;" class="reload" data-original-title="" title=""> </a>
                            <a href="javascript:;" class="remove" data-original-title="" title=""> </a>
                            </div>*@
                        </div>
                        <div class="portlet-body">
                            <div class="table-scrollable" style="overflow-x:hidden;">
                                <table class="table table-striped table-bordered table-advance table-hover">
                                    <thead>
                                        <tr>
                                            <th>
                                                <i class="fa fa-briefcase"></i> @Html.ActionLink("  التسلسل  ", "Users", new { @sortOrder = ViewBag.IdSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>
                                            <th class="hidden-xs">
                                                <i class="fa fa-user"></i> @Html.ActionLink("  اسم المستخدم   ", "Users", new { @sortOrder = ViewBag.NameSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>
                                            <th class="hidden-xs">
                                                <i class="fa fa-user"></i> @Html.ActionLink("  الاسم الكامل  ", "Users", new { @sortOrder = ViewBag.FullNameSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>
                                            @*<th style="padding-bottom:14px;">
                                            <i class="fa fa-bars"></i> الصلاحيات
                                            </th>*@
                                            @*<th style="padding-bottom:14px;">
                                            <i class="fa fa-map-marker"></i> المنطقة الموجود فيها
                                            </th>
                                            <th style="padding-bottom:14px;">
                                            <i class="fa fa-star"></i> إعلان مميز
                                            </th>
                                            <th>
                                            <i class="fa fa-usd"></i> @Html.ActionLink("السعر", "Classified", new { @sortOrder = ViewBag.PriceSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>*@
                                            <th>
                                                <i class="fa fa-calendar" style="margin-left:5px;"></i>@Html.ActionLink("  تاريخ الإضافة  ", "Users", new { @sortOrder = ViewBag.DateSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>

                                            @*<th style="padding-bottom:14px;">
                                            <i class="fa fa-picture-o"></i> الصورة الرئيسية
                                            </th>*@

                                            <th> </th>
                                            <th>خيارات المستخدم </th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            int index_m;

                                            if (Model.PageNumber == 1)
                                            {
                                                index_m = 0;
                                            }

                                            else
                                            {
                                                index_m = (Model.PageNumber - 1) * Model.PageSize;
                                            }
                                            if (index_m == null)
                                            {
                                                index_m = 0;
                                            }

                                            foreach (var c in ViewBag.Base)
                                            {








                                                <tr class="tr" style="height:100px;">

                                                    <td class="highlight">@c.UserId</td>
                                                    <td class="highlight">@c.UserName</td>
                                                    <td class="highlight">@c.FullName</td>
                                                    <td class="highlight">@c.CreationDate</td>
                                                    @*@foreach (var gg in ViewBag.CategoryName)
                                                    {
                                                    if (gg.Id == c.CategoryId)
                                                    {
                                                    <td class="hidden-xs">@gg.CategoryName</td>
                                                    break;
                                                    }

                                                    }*@

                                                    @*<td class="td">@ViewBag.CategoryName[@index_m].CategoryName</td>*@

                                                    @*@foreach (var gg in ViewBag.TownName)
                                                    {
                                                    if (gg.Id == c.TownId)
                                                    {
                                                    <td class="hidden-xs">@gg.TownName</td>
                                                    break;
                                                    }

                                                    }*@


                                                    @*<td class="td">@ViewBag.TownName[@index_m].TownName</td>*@
                                                    @*<td class="hidden-xs">@c.IsFeatured</td>
                                                    <td class="hidden-xs">@c.Price</td>
                                                    <td class="hidden-xs">@c.Date</td>
                                                    <td class="hidden-xs"><img src="@c.ImagePath" style="width:100px;height:100px;" /></td>*@
                                                    @*@foreach (var e in c.TownsDto)
                                                    {


                                                    <td class="td">@e.TownName</td>
                                                    <td>@Html.ActionLink("حذف المنطقة", "DeleteTown", "Home", new { @town = @e.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })</td>
                                                    <td >@Html.ActionLink("تعديل منطقة", "EditTown", "Home", new { @townName = @e.TownName,@id = e.Id,@cityID = c.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })</td>



                                                    }*@
                                                    @*@if (c.IsFeatured == false)
                                                    {
                                                    <td class="">@Html.ActionLink("  تحويل لمميز  ", "ToFClassify", "Home", new { @id = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm blue fa fa-angle-double-up", @style = "text-decoration: none;" })</td>
                                                    }
                                                    @if (c.IsFeatured == true)
                                                    {
                                                    <td class="">@Html.ActionLink("  تحويل لغير مميز  ", "ToUnFClassify", "Home", new { @id = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm blue fa fa-angle-double-down", @style = "text-decoration: none;" })</td>
                                                    }*@


                                                    <td>@Html.ActionLink("  رؤية إعلانات المستخدم  ", "Classified", "Classify", new { @UserId = @c.UserId }, new { @class = "btn btn-outline btn-circle btn-sm red fa fa-eye" })</td>
                                                    <td class="">@Html.ActionLink("   حذف المستخدم  ", "DeleteUser", "Users", new { @UserId = @c.UserId }, new { @class = "btn btn-outline btn-circle dark btn-sm black fa fa-trash", @style = "text-decoration: none;" })</td>

                                                    @*<td class="td">@Html.ActionLink("إضافة منطقة", "AddTown", "Home", new { @city = @c.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })</td>*@
                                                    <td class="">@Html.ActionLink("  تعديل المعلومات  ", "EditUser", "Users", new { @UserName = @c.UserName, @UserId = @c.UserId }, new { @class = "btn btn-outline btn-circle btn-sm purple fa fa-edit", @style = "text-decoration: none;" })</td>
                                                    <td>@Html.ActionLink("   المفضلة  ", "FavoriteClassify", "Users", new { @guid = @c.UserId, @UserId = @c.UserId }, new { @class = "btn btn-outline btn-circle btn-sm purple fa fa-edit", @style = "text-decoration: none;" })</td>

                                                    @*@{ index_m++;}*@

                                                </tr>


                                            }

                                        }



                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- END SAMPLE TABLE PORTLET-->
                </div>













                @*<table style="margin:10px 10px;">
                    <tr class="tr">
                        <td class="td">@Html.ActionLink("التسلسل", "User", new { @sortOrder = ViewBag.IdSortParm }, new { @class = "dropbtn2" ,@style= "color:white;" })</td>
                        <td class="td">@Html.ActionLink("اسم المستخدم", "User", new { @sortOrder = ViewBag.NameSortParm }, new { @class = "dropbtn2",@style = "color:white;" }) </td>

                        <td class="td"> الصلاحيات</td>
                        <td class="td">@Html.ActionLink("تاريخ الإضافة", "User", new { @sortOrder = ViewBag.DateSortParm }, new { @class = "dropbtn2", @style = "color:white;" }) </td>



                        <td> </td>
                        <td class="td">خيارات المستخدم</td>



                    </tr>

                    @{
                    int index_m = 0;

                    foreach (var c in ViewBag.Base)
                    {


                    <tr class="tr" style="height:100px;color:white;">

                        <td class="td">@c.UserId</td>
                        <td class="td">@c.UserName</td>

                        <td>@c.Role</td>
                        <td>@c.CreationDate</td>


                        <td class="td">@Html.ActionLink("حذف المستخدم", "DeleteUser", "Home", new { @UserId = @c.UserId }, new { @class = "dropbtn2", @style = "text-decoration: none;" })</td>

                        <td class="td">@Html.ActionLink("تعديل المعلومات", "EditUser", "Home", new { @UserName = @c.UserName, @UserId = @c.UserId }, new { @class = "dropbtn2", @style = "text-decoration: none;" })</td>
                        <td class="td">@Html.ActionLink("رؤية إعلانات المستخدم", "Classified", "Home", new { @UserId = @c.UserId }, new { @class = "dropbtn2" })</td>

                        @{index_m++;}

                    </tr>


                    }

                    }
                </table>*@

                <div style="text-align:center;">
                    <h5 style="color:black;">
                        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
                    </h5>
                    @Html.PagedListPager(Model, Page => Url.Action("Users",
new { Page, SortOrder = ViewBag.CurrentSort, CurrentFilter = ViewBag.CurrentFilter }))
                </div>

            </div>


        </div></div>
