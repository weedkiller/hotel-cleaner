
@{
    ViewBag.Title = "Guide";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .lightBlue {
        border-color: #36c6d3;
        color: #3f444a;
        background: 0 0;
    }

        .lightBlue:hover {
            border-color: #36c6d3;
            color: #fff;
            background-color: #36c6d3;
        }

    .lightBlue2 {
        cursor: text;
        border-color: #36c6d3;
        color: #3f444a;
        background: 0 0;
    }


    /* Dropdown Button */
    .dropbtn {
        background-color: #36c6d3;
        color: white;
        padding: 7px 5px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        text-decoration: none !important;
    }

    .dropbtn3 {
        background-color: #36c6d3;
        color: white;
        padding: 7px 5px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        text-decoration: none;
    }

    .dropbtn4 {
        background-color: #38bf3b;
        color: white;
        padding: 7px 5px;
        margin: 5px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        text-decoration: none !important;
        opacity: 0.7;
    }

    /* Dropdown button on hover & focus */
    .dropbtn:hover, .dropbtn:focus {
        text-decoration: none !important;
        color: white;
        background-color: #199da9;
        box-shadow: 5px 5px 7px grey;
        transition: all ease-in-out 0.3s;
    }

    .dropbtn3:hover, .dropbtn3:focus {
        text-decoration: none !important;
        color: white;
        background-color: #199da9;
        box-shadow: 5px 5px 7px grey;
        transition: all ease-in-out 0.3s;
    }

    .dropbtn4:hover, .dropbtn4:focus {
        text-decoration: none !important;
        color: white;
        background-color: #38a93b;
        opacity: 1;
        box-shadow: 5px 5px 7px grey;
        transition: all ease-in-out 0.3s;
    }
</style>



<div class="page-content" style="min-height: 1112px;">
    <!-- BEGIN PAGE HEADER-->
    <!-- BEGIN THEME PANEL -->
    <!-- END THEME PANEL -->
    <!-- BEGIN PAGE BAR -->
    <script>
        onload.call(Doit4())
    function dialog(ID_Value) {

        var modal1 = document.getElementById('my-confirm-dialog');
        var model2 = document.getElementById('DeleteConfirm');
        modal1.style.display = "block";
        model2.value = ID_Value;

    }

    function dialog2(ID_Value) {
        var nn=0;
        for (var k in ID_Value){
            nn++;
        }
        if(nn > 0){

        var modal1 = document.getElementById('my-confirm-dialog2');
        //var model2 = document.getElementById('DeleteConfirm');
        modal1.style.display = "block";
        model2.value = ID_Value;
        }
        else{
            var modal1 = document.getElementById('my-confirm-dialog3');
            //var model2 = document.getElementById('DeleteConfirm');
            modal1.style.display = "block";
            model2.value = ID_Value;

        }

    }



    function CloseDialog() {

        var modal1 = document.getElementById('my-confirm-dialog');
        modal1.style.display = "none";

    }
    function CloseDialog2() {

        var modal1 = document.getElementById('my-confirm-dialog2');
        modal1.style.display = "none";

    }

    function getview(Id){
         var url = "@Html.Raw(Url.Action("AddTown", "Controller", new { city = "-parameter" }))";
         url = url.replace("-parameter", Id);
         $('#partial').load(url);

    }

        //function show() {
        //    document.getElementById('partial').style.display = "inline-block";
        //}
        //function close() {
        //    document.getElementById('partial').style.display = "none";
        //}
    </script>


    @*<div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <a href="index.html">Home</a>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <span>Dashboard</span>
                </li>
            </ul>
            <div class="page-toolbar">

            </div>
        </div>*@


    <!-- END PAGE BAR -->
    <!-- BEGIN PAGE TITLE-->
    <div id="dashboard-report-range" class="pull-right tooltips btn btn-sm" data-container="body" data-placement="bottom" data-original-title="تاريخ اليوم">
        <i class="icon-calendar"></i>&nbsp;
        <span class="thin uppercase hidden-xs">@DateTime.Now.ToShortDateString()</span>&nbsp;
        @*<i class="fa fa-angle-down"></i>*@
    </div>
    <h1 class="page-title" style="margin:0px 5px;">
        الفئات الرئيسية والفرعية
        <small>عرض وإضافة وتعديل</small>
    </h1>
    <!-- END PAGE TITLE-->
    <!-- END PAGE HEADER-->
    <!-- BEGIN DASHBOARD STATS 1-->

    <div class="clearfix"></div>
    <!-- END DASHBOARD STATS 1-->

    <link href="~/Content/AddCategory/dialog-confirm.css" rel="stylesheet" />

    <!-- START Cities View-->
    @model PagedList.IPagedList<NawafizApp.Services.Dtos.GuideAllDto>
    @using PagedList.Mvc;
    <link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />


    <div class="page-content-wrapper" style="margin-right:-20px;width:103.7%">
        <div class="" style="min-height: 1112px;background-color:white;">
            <div style="text-align:center;display:inline-block;width:100%;">
                @*<a data-toggle="collapse" data-target="#addcity" class="dropbtn fa fa-plus-square" style="margin:5px 10px;"> إضافة محافظة </a>*@

                @using (Html.BeginForm("Guide", "Home", FormMethod.Get, new { @style = "display:inline-block;" }))
                {
                    <p style="margin-right:30px;text-align:center;display:inline-block;">
                        @Html.TextBox("SearchString", ViewBag.CurrentFilter as string, new { @class = "btn btn-outline btn-circle lightBlue2 btn-sm fa fa-search" })
                        <input type="submit" value="بحث" class="btn btn-outline btn-circle lightBlue btn-sm fa fa-question" />
                    </p>
                }
                @*<div style="margin-right:50px;padding:10px;text-align:center;display:inline-block;">*@
                <br />  @Html.ActionLink("  إضافة فئة رئيسية ", "AddGuide", "Home", new { @class = "btn btn-outline btn-circle lightBlue btn-sm fa fa-plus-square", @style = "text-decoration: none;" })


            </div>

            <div class="col-md-12" style="padding:0px;">
                <!-- BEGIN SAMPLE TABLE PORTLET-->
                <div class="portlet" style="padding-left:4%;margin-right:4%;">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-bell-o"></i>جدول الفئات
                        </div>
                        @*<div class="tools">
                                <a href="javascript:;" class="collapse" data-original-title="" title=""> </a>
                                <a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title=""> </a>
                                <a href="javascript:;" class="reload" data-original-title="" title=""> </a>
                                <a href="javascript:;" class="remove" data-original-title="" title=""> </a>
                            </div>*@
                    </div>
                    <div class="portlet-body">
                        <div class="table-scrollable" style="overflow-x:hidden;">
                            <table class="table table-striped table-bordered table-advance table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            <i class="fa fa-briefcase"></i> @Html.ActionLink("التسلسل", "Guide", new { @sortOrder = ViewBag.IdSortParm, CurrentFilter = ViewBag.CurrentFilter }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm", @style = "" })
                                        </th>
                                        <th class="hidden-xs">
                                            <i class="fa fa-user"></i> @Html.ActionLink("اسم الفئة", "Guide", new { @sortOrder = ViewBag.NameSortParm, CurrentFilter = ViewBag.CurrentFilter }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm", @style = "" })
                                        </th>
                                        <th class="hidden-xs">
                                            <i class="fa fa-user"></i> حالة الفئة(فعالة أم لا)
                                        </th>
                                        <th class="hidden-xs">
                                            <i class="fa fa-user"></i> ترتيب الفئة
                                        </th>
                                        <th class="hidden-xs">
                                            <i class="fa fa-user"></i> صورة الفئة
                                        </th>
                                        @*<th style="padding-bottom:14px;">
                                                <i class="fa fa-bars"></i> فئة الإعلان
                                            </th>
                                            <th style="padding-bottom:14px;">
                                                <i class="fa fa-map-marker"></i> المنطقة الموجود فيها
                                            </th>
                                            <th style="padding-bottom:14px;">
                                                <i class="fa fa-star"></i> إعلان مميز
                                            </th>
                                            <th>
                                                <i class="fa fa-usd"></i> @Html.ActionLink("السعر", "Classified", new { @sortOrder = ViewBag.PriceSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>
                                            <th>
                                                <i class="fa fa-calendar" style="margin-left:5px;"></i>@Html.ActionLink("تاريخ الإضافة", "Classified", new { @sortOrder = ViewBag.DateSortParm }, new { @class = "btn btn-outline btn-circle lightBlue btn-sm" })
                                            </th>

                                            <th style="padding-bottom:14px;">
                                                <i class="fa fa-picture-o"></i> الصورة الرئيسية
                                            </th>*@

                                        
                                        <th colspan="3">خيارات الفئات </th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    @{

                                        int index_m;

                                        if (Model.PageNumber == 1)
                                        {
                                            index_m = 0;
                                        }

                                        else
                                        {
                                            index_m = (Model.PageNumber - 1) * Model.PageSize;
                                        }
                                        if (index_m == null)
                                        {
                                            index_m = 0;
                                        }

                                        foreach (var c in ViewBag.Base)
                                        {


                                            <tr class="tr" style="height:100px;">

                                                <td class="highlight">@c.Id</td>
                                                <td class="highlight">@c.GuideArabicName</td>
                                                <td class="highlight">@c.IsActive</td>
                                                <td class="highlight">@c.Sort</td>
                                                <td class="highlight"><img src="@c.ImagePath" width="100px" height="80px" /></td>
                                                @*@foreach (var gg in ViewBag.CategoryName)
                                                    {
                                                        if (gg.Id == c.CategoryId)
                                                        {
                                                            <td class="hidden-xs">@gg.CategoryName</td>
                                                            break;
                                                        }

                                                    }*@

                                                @*<td class="td">@ViewBag.CategoryName[@index_m].CategoryName</td>*@

                                                @*@foreach (var gg in ViewBag.TownName)
                                                    {
                                                        if (gg.Id == c.TownId)
                                                        {
                                                            <td class="hidden-xs">@gg.TownName</td>
                                                            break;
                                                        }

                                                    }*@


                                                @*<td class="td">@ViewBag.TownName[@index_m].TownName</td>*@
                                                @*<td class="hidden-xs">@c.IsFeatured</td>
                                                    <td class="hidden-xs">@c.Price</td>
                                                    <td class="hidden-xs">@c.Date</td>
                                                    <td class="hidden-xs"><img src="@c.ImagePath" style="width:100px;height:100px;" /></td>*@
                                                @*@foreach (var e in c.TownsDto)
                                                    {


                                                                <td class="td">@e.TownName</td>
                                                                <td>@Html.ActionLink("حذف المنطقة", "DeleteTown", "Home", new { @town = @e.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })</td>
                                                                <td >@Html.ActionLink("تعديل منطقة", "EditTown", "Home", new { @townName = @e.TownName,@id = e.Id,@cityID = c.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })</td>



                                                            }*@
                                                @*@if (c.IsFeatured == false)
                                                    {
                                                        <td class="">@Html.ActionLink("  تحويل لمميز  ", "ToFClassify", "Home", new { @id = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm blue fa fa-angle-double-up", @style = "text-decoration: none;" })</td>
                                                    }
                                                    @if (c.IsFeatured == true)
                                                    {
                                                        <td class="">@Html.ActionLink("  تحويل لغير مميز  ", "ToUnFClassify", "Home", new { @id = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm blue fa fa-angle-double-down", @style = "text-decoration: none;" })</td>
                                                    }*@

                                                <td>@Html.ActionLink("  حذف الفئة بأكملها  ", "DeleteGuide", "Home", new { @guide = @c.Id }, new { @class = "btn btn-outline btn-circle dark btn-sm black fa fa-trash", @style = "text-decoration: none;" })</td>
                                                <td>@Html.ActionLink("  إضافة فئة فرعية  ", "AddGuideSub", "Home", new { @guide = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm black fa fa-plus", @style = "text-decoration: none;" })</td>
                                              
                                                 @*@if (@c.IsActive == true)
                                               {
                                                <td>@Html.ActionLink("  التحويل لغير فعالة  ", "UnActiveGuide", "Home", new { @id = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm black fa fa-plus", @style = "text-decoration: none;" })</td>

                                               }
                                                @if (@c.IsActive == false)
                                                {
                                                    <td>@Html.ActionLink("  التحويل لفعالة  ", "ActiveGuide", "Home", new { @id = @c.Id }, new { @class = "btn btn-outline btn-circle red btn-sm black fa fa-plus", @style = "text-decoration: none;" })</td>

                                                }*@
                                                
                                    
                                              <td class="">@Html.ActionLink("  تفاصيل الفئة  ", "EditGuide", "Home", new { @guideName = @c.GuideArabicName, @guideID = c.Id }, new { @class = "btn btn-outline btn-circle btn-sm purple fa fa-edit", @style = "text-decoration: none;" })</td>


                                                @{ index_m++;}

                                            </tr>


                                                    }

                                    }



                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- END SAMPLE TABLE PORTLET-->
            </div>







            </ul>
            <div style="margin:10px 30px 10px 10px;font-size:17px;text-align:center;">
                @{

                    foreach (var c in ViewBag.Base)
                    {
                        int m = 0;


                        @*<div style="margin:10px 5px;display:inline-block; border-bottom:2px dashed #38bf3b;">
                            @*c.Id
                            <a data-toggle="collapse" data-target="#@c.CityName" class="dropbtn4 fa fa-star"> @c.CityName </a>

                            <br /><br />
                            @Html.ActionLink("حذف المحافظة بأكملها", "DeleteCity", "Home", new { @city = @c.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })

                            @Html.ActionLink("إضافة منطقة", "AddTown", "Home", new { @city = @c.Id }, new { @class = "dropbtn", @style = "text-decoration: none;" })

                            @*<button class="dropbtn3 fa fa-trash" onclick="dialog2(@c.Id)" style="margin :5px 2px;">  إضافة منطقة </button>*@
                        @*<a data-toggle="collapse" data-target="#addtown_@c.Id" class="dropbtn fa fa-plus-square" style="margin :5px 2px;"> إضافة منطقة </a>*@

                        @*@Html.ActionLink("تعديل محافظة", "EditCity", "Home", new { @cityName = @c.CityName, @cityID = c.Id }, new { @class = "dropbtn", @style = "text-decoration: none;margin:5px 2px;" })
                            <br>*@

                        @*<div id="partial" style="display: none">
                                @{Html.RenderAction("AddTown", new { @city = @c.Id }); }
                                <button onclick="close()" class="dropbtn">إلغاء</button>

                            </div>

                            </div>*@

                        @*<div id="addtown_@c.Id" class="container collapse" aria-expanded="false" style="text-align:center;border:1px dotted #36c6d3;">
                                <h4 style="margin:5px;display:inline-block;">@c.CityName </h4><h4 style="display:inline-block;" class="fa fa-angle-left">  إضافة منطقة  </h4>
                                 @using (Html.BeginForm("AddTown", "Home"))
                                {
                                    <p style="margin-right:30px;text-align:center;">
                                        <h4 style="margin:5px;display:inline-block;"> الاسم العربي</h4>
                                        @Html.TextBox("ArabicTownName", null, new { @style = "display:inline-block;margin-right:15px;" })
                                        <br />
                                        <h4 style="margin:5px;display:inline-block;">الاسم الانكليزي</h4>
                                        @Html.TextBox("EnglishTownName", null, new { @style = "display:inline-block;" })
                                        <br />
                                        <input id="CityId" name="CityId" type="text" value="@c.Id" style="display:none;" />

                                        <br />
                                        <input type="submit" value="حفظ" class="dropbtn" style="margin:5px;" />
                                        <input type="reset" data-toggle="collapse" data-target="#addtown_@c.Id" class="dropbtn" style="margin:5px;" value="إلغاء" />
                                    </p>
                                }


                            </div>*@




                    }

                }
            </div>
            <br />

            @{
                foreach (var c in ViewBag.Base)
                {
                    <div id="@c.GuideArabicName" class="container collapse" aria-expanded="false" style="text-align:center;border:1px dotted #36c6d3;">
                        <h3 style="margin:5px;">@c.GuideArabicName</h3>
                        @if(@c.HasChildren == true)
                        {
                            
                            foreach (var e in c.GuideChildren)
                            {


                            <div class="" style="margin:5px;padding:0 5px;display:inline-block;">

                                @e.GuideArabicName<br />
                                @*<i class="fa fa-trash" style="padding-top:10px;" onclick="dialog(@e.Id)"></i>
                                *@
                                <button class="dropbtn3 fa fa-trash" onclick="dialog(@e.Id)">  حذف  </button>
                                @*@Html.ActionLink("  حذف  ",null,null,new {@class= "dropbtn3 fa fa-trash", @style="text-decoration: none; display:inline-block;",@onclick= "dialog("+@e.Id+")" })*@
                                @*@Html.ActionLink("  حذف  " , "DeleteTown", "Home", new { @id = @e.Id }, new { @class = "dropbtn3 fa fa-trash", @style = "text-decoration: none;display:inline-block;" })*@
                                @Html.ActionLink("  تعديل  ", "EditGuideTown", "Home", new { @townName = @e.GuideArabicName, @id = e.Id, @cityID = c.Id }, new { @class = "dropbtn3 fa fa-gear", @style = "text-decoration: none;display:inline-block;" })
                            </div>
                            }





                        }

                        @*@if (m < 4)
                            {
                                var ee = 4 - m;
                                for (int i = 0; i < ee; i++)
                                {
                                    <td></td>
                                }
                            }*@

                    </div>
                }
            }





            <div style="text-align:center;">
                <h5 style="color:white;">
                    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
                </h5>
                @Html.PagedListPager(Model, Page => Url.Action("Guide",
        new { Page, SortOrder = ViewBag.CurrentSort, CurrentFilter = ViewBag.CurrentFilter }))
            </div>

        </div>
    </div>


    <!-- END OF Cities VIEW -->



    @using (Html.BeginForm("DeleteGuide", "Home", FormMethod.Get))
    {

        <div id="my-confirm-dialog2" class="dialog-overlay" style="display: none;">

            <div class="dialog-card" style="margin-top: -146px;text-align:center;">

                @*<div class="dialog-question-sign"><i class="fa fa-question"></i></div>*@

                <div class="dialog-info" style="margin-left:60px;">

                    <h5>لا يمكنك حذف المحافظة لأنها تحوي مناطق وإعلانات</h5>
                    @* @Html.Action("DeleteCategory", "Admin", new { id = 40 })*@

                    <div class="modal-body ">

                        @*<div class="col-sm-6">
                                <button class="dialog-confirm-button" style="margin:5px;background-color:#36c6d3;" name="id" id="DeleteConfirm">Yes</button>
                            </div>*@

                        <div class="col-sm-6">
                            <input type="button" class="dialog-confirm-button" style="margin:5px; background-color:red;" value="OK" onclick="CloseDialog2()" />
                        </div>







                    </div>

                </div>

            </div>

        </div>

    }


    @using (Html.BeginForm("DeleteGuide", "Home", FormMethod.Get))
    {

        <div id="my-confirm-dialog3" class="dialog-overlay" style="display: none;">

            <div class="dialog-card" style="margin-top: -146px;text-align:center;">

                @*<div class="dialog-question-sign"><i class="fa fa-question"></i></div>*@

                <div class="dialog-info" style="margin-left:60px;">

                    <h5>هل أنت متأكد ؟</h5>
                    @* @Html.Action("DeleteCategory", "Admin", new { id = 40 })*@

                    <div class="modal-body ">

                        <div class="col-sm-6">
                            <button class="dialog-confirm-button" style="margin:5px;background-color:#36c6d3;" name="id" id="DeleteConfirm">Yes</button>
                        </div>

                        <div class="col-sm-6">
                            <input type="button" class="dialog-confirm-button" style="margin:5px; background-color:red;" value="OK" onclick="CloseDialog2()" />
                        </div>







                    </div>

                </div>

            </div>

        </div>

    }













    @using (Html.BeginForm("DeleteTown", "Home", FormMethod.Get))
    {
        <div id="my-confirm-dialog" class="dialog-overlay" style="display: none;">

            <div class="dialog-card" style="margin-top: -146px;text-align:center;">

                @*<div class="dialog-question-sign"><i class="fa fa-question"></i></div>*@

                <div class="dialog-info" style="margin-left:60px;">

                    <h5>هل أنت متأكد؟</h5>
                    @* @Html.Action("DeleteCategory", "Admin", new { id = 40 })*@

                    <div class="modal-body ">

                        <div class="col-sm-6">
                            <button class="dialog-confirm-button" style="margin:5px;background-color:#36c6d3;" name="id" id="DeleteConfirm">Yes</button>
                        </div>

                        <div class="col-sm-6">
                            <input type="button" class="dialog-confirm-button" style="margin:5px; background-color:red;" value="NO" onclick="CloseDialog()" />
                        </div>







                    </div>

                </div>

            </div>

        </div>

    }


    @using (Html.BeginForm("AddTown", "Home", FormMethod.Post))
    {
        <div id="my-confirm-dialog2" class="dialog-overlay" style="display: none;">

            <div class="dialog-card" style="margin-top: -146px;text-align:center;">

                @*<div class="dialog-question-sign"><i class="fa fa-question"></i></div>*@

                <div style="margin-right:20px;">

                    <blockquote style="border:1px ridge white;text-align:center;" title="إضافة منطقة">
                        <div style="margin-bottom:5px;">
                            <h4 style="color:black;display:inline">الاسم العربي</h4>
                            @Html.TextBox("ArabicTownName")
                        </div>
                        <div style="margin-bottom:5px;">
                            <h4 style="color:black;display:inline;margin-right:20px;">الاسم الانكليزي</h4>
                            @Html.TextBox("EnglishTownName")
                        </div>
                        <input type="text" name="CityId" id="CityId" />
                        @*@Html.TextBoxFor(m => m.CityId,new {@style = "display:none;" },new { @Value = @ViewBag.city });*@
                        @*@Html.TextBox("CityId",ViewBag.CityId,new { @id = "CityId" });*@
                        <script>
                            function dialog2(Id) {

                                var modal1 = document.getElementById('my-confirm-dialog2');
                                var model2 = document.getElementById('CityId');
                                modal1.style.display = "block";
                                model2.value = Id;

                            }
                        </script>


                        <button type="submit" class="dropbtn" id="AddConfirm">إضافة</button>

                        <button type="button" class="dropbtn" onclick="CloseDialog2()">إلغاء</button>
                    </blockquote>
                </div>

            </div>

        </div>

    }




</div>

